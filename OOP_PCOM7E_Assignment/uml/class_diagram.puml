@startuml
skinparam packageStyle rectangle
skinparam classAttributeIconSize 0

package "Robot System" {

  class Waypoint {
    + x: Integer
    + y: Integer
  }

  class EnvObject {
    + id: String
    + kind: String
    + position: Waypoint
  }

  enum RobotState {
    OFF
    IDLE
    MOVING
    MANIPULATING
    COMMUNICATING
    CHARGING
    ERROR
  }

  enum CmdType {
    NAVIGATE
    PICK
    SPEAK
    TICK
  }

  class Command {
    + type: CmdType
    + args: Map<String,String>
  }

  class Robot {
    - id: String
    - position: Waypoint
    - state: RobotState
    - batteryLevel: Integer
    + powerOn(): Boolean
    + powerOff(): Boolean
    + tick(cmd: Command): String
  }

  class Navigation {
    - pathQueue: Queue<Waypoint>
    + planPath(start: Waypoint, target: Waypoint)
    + nextStep(): Waypoint
  }

  class Manipulator {
    - graspHistory: Stack<String>
    + pick(objectId: String): Boolean
    + undoLastGrasp(): Boolean
  }

  class Communicator {
    + speak(text: String): void
    + display(text: String): void
  }

  class Environment {
    - objects: List<EnvObject>
    - sensorReadings: List<Float>
    + sense(): void
    + findNearestObject(kind: String): EnvObject
  }

  class MemoryStore {
    - facts: List<String>
    - breadcrumbs: Stack<String>
    + pushAction(a: String): void
    + lastAction(): String
  }

  class CLI {
    - cmdQueue: Queue<Command>
    + enqueue(cmd: Command): void
    + readCommand(): Command
  }

  Robot "1" *-- "1" Navigation
  Robot "1" *-- "1" Manipulator
  Robot "1" *-- "1" Communicator
  Robot "1" *-- "1" Environment
  Robot "1" *-- "1" MemoryStore

  Environment "1" *-- "*" EnvObject : contains
  CLI --> Robot : sends Command
}
@enduml
