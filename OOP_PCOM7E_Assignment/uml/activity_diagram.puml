@startuml
' Humanoid Robot — Pick flow (OFF / object-not-found / low-battery / no-path / grasp-fail)

|User|
start
:Type "pick <objectKind>" in CLI;

|CLI|
:Enqueue Command;

|Robot|
:Read Command;
if (state == OFF) then (yes)
  :Reply: "Power on first";
  stop
else (no)
endif
:Environment.sense();

|Environment|
:Collect sensor data;

|Robot|
if (objectFound?) then (yes)
  if (battery < 10%) then (yes)
    :Reply: "Low battery – please charge";
    stop
  else (no)
  endif
else (no)
  :Reply: "Object not found";
  stop
endif

|Navigation|
:planPath(targetPos);
repeat
  :nextStep();
repeat while (not at object)

|Robot|
if (no path or timeout) then (yes)
  :state = ERROR;
  :Notify: "No path to target";
  stop
else (no)
endif
:state = MANIPULATING;

|Manipulator|
:pick(objectId);
if (graspSuccess?) then (yes)
  |MemoryStore|
  :pushAction(PICK);

  |Robot|
  :state = IDLE;
  :Ack success to CLI;
  stop
else (no)
  |Robot|
  :state = ERROR;
  :Notify: "Grasp failed";
  stop
endif
@enduml
